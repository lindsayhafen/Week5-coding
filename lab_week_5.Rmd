---
title: "Penguin Size Comparisons"
author: "Lindsay Hafen"
date: "11/15/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(palmerpenguins)
library(effsize)
library(broom)
library(ggbeeswarm)
library(car)
```

# Part 1. T-tests
-Compare means between 2 groups - enough evidence to make us think that the data is drawn from populaitons with different means?
- Mass comparison between male and female chinstrap penguins

- Could filter male and females to make histograms, but ggplot can do that for us with the facet capability

- QQ plot compare our sample to data if it were perfectly drawn from a population with perfectly normal distribution (closer to straight line = closer to normal dist)

```{r}
chinstraps <- penguins %>% 
  filter(species == "Chinstrap")

# Histograms
ggplot(chinstraps, aes(x = body_mass_g)) +
  geom_histogram(bins = 10, fill = "darkmagenta", color = "black") +
  facet_wrap(~ sex)

## QQ plot:
ggplot(chinstraps, aes(sample = body_mass_g)) +
  geom_qq() +
  facet_wrap(~ sex)

# Descriptive statistics 
chinstraps %>% 
  group_by(sex) %>% 
  summarize(mean_mass = mean(body_mass_g),
            median_mass = median(body_mass_g),
            sd_mass = sd(body_mass_g),
            sample_size = n())
  


```

## Get vectors of body_mass_g for female and male chinstrap penguins seperately

pull will pull out values from just what we specify

```{r}
chinstraps_f <- chinstraps %>% 
  filter(sex == "female") %>% 
  pull(body_mass_g)

chinstraps_m <- chinstraps %>% 
  filter(sex == "male") %>% 
  pull(body_mass_g)
```

## Run t-tests in a couple of ways
1. Is there a *significant* difference in body mass between male and female chinstrap penguins
-Welch's (Not assumeing equal variance)

```{r}
chinstrap_ttest <- t.test(chinstraps_f, chinstraps_m)
chinstrap_ttest

# But what about context: actual difference (how much larger are males than females?), effect size?
cohen.d(chinstraps_m, chinstraps_f)

# Codealong key has a tutorial of how to use broom function to include data frame for test outcomes in the knitted doc (?)
```

### Are male chinstrap penguins significantly larger (body mass) than female chinstrap penguins 
- One sided test - only interested in one tail of the mean distribution) (What is the prob that I could have gotten a mean difference this large or larger)

```{r}
t.test(chinstraps_m, chinstraps_f, alternative = "greater") #greater or less depends on the order of vectors in the t.test function = in this case males>females
```






